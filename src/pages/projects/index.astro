---
import Layout from "@/layouts/Layout.astro";
import CardProject from "@/components/CardProject.astro";
import { repositories } from "@/lib/data";
---

<Layout title="Proyectos.">
  <input
    type="text"
    class="text-gray-400 adelante absolute top-0 left-0 w-full sm:pt-5 pt-16 pl-10 bg-transparent focus:outline-none"
    id="filter"
    placeholder="Buscar proyecto..."
  />
  <div
    class="grid justify-center items-center lg:grid-cols-2 xl:grid-cols-3 grid-cols-1 h-screen w-screen pl-10 pr-10 gap-10 pt-32"
  >
    {
      repositories.map((repo: any) => (
        <CardProject
          nameProject={repo.nameProject}
          descriptionProject={repo.descriptionProject}
          patchImage={repo.patchImage}
          githubUrl={repo.githubUrl}
        />
      ))
    }
  </div>
</Layout>
<script>
  document
    .getElementById("filter")!
    .addEventListener("input", function (this: HTMLInputElement) {
      let filterValue = this.value.toLowerCase();
      let gridItems = document.querySelectorAll(".grid-item");

      gridItems.forEach(function (item) {
        const img = item.querySelector("img");

        const altText = img!.getAttribute("alt");

        const htmlItem = item as HTMLElement;

        if (htmlItem.textContent!.toLowerCase().includes(filterValue)) {
          htmlItem.style.display = "";
        } else {
          htmlItem.style.display = "none";
        }
      });
    });
</script>
<style>
  main {
    margin: auto;
  }

  .adelante {
    z-index: 100;
  }
</style>
